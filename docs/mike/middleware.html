<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>mike/middleware</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);

  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
      toggleSwitch.checked = true;
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">mike/middleware</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#8" id="58">Vars</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#beforeRequestCalls"
    title="beforeRequestCalls = newStmtList([])"><wbr />before<wbr />Request<wbr />Calls<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#afterRequestCalls"
    title="afterRequestCalls = newStmtList([])"><wbr />after<wbr />Request<wbr />Calls<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#callLogging%2CMikeRequest%2Cstring"
    title="callLogging(request: MikeRequest; prefix: string = &quot;&quot;)"><wbr />call<wbr />Logging<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#17" id="67">Macros</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#beforeRequest.m%2Cuntyped"
    title="beforeRequest(body: untyped): untyped"><wbr />before<wbr />Request<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#afterRequest.m%2Cuntyped"
    title="afterRequest(body: untyped): untyped"><wbr />after<wbr />Request<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#callBeforewares.m"
    title="callBeforewares(): untyped"><wbr />call<wbr />Beforewares<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#callAfterwares.m"
    title="callAfterwares(): untyped"><wbr />call<wbr />Afterwares<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#insertBefore.m%2Cuntyped"
    title="insertBefore(body: untyped): untyped"><wbr />insert<wbr />Before<span class="attachedType"></span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="request.html">request</a>
</dl></div>
<div class="section" id="8">
<h1><a class="toc-backref" href="#8">Vars</a></h1>
<dl class="item">
<a id="beforeRequestCalls"></a>
<dt><pre><a href="middleware.html#beforeRequestCalls"><span class="Identifier">beforeRequestCalls</span></a> <span class="Other">=</span> <span class="Identifier">newStmtList</span><span class="Other">(</span><span class="Other">[</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L7"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L7" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="afterRequestCalls"></a>
<dt><pre><a href="middleware.html#afterRequestCalls"><span class="Identifier">afterRequestCalls</span></a> <span class="Other">=</span> <span class="Identifier">newStmtList</span><span class="Other">(</span><span class="Other">[</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L8"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L8" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="callLogging,MikeRequest,string"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#callLogging%2CMikeRequest%2Cstring"><span class="Identifier">callLogging</span></a><span class="Other">(</span><span class="Identifier">request</span><span class="Other">:</span> <a href="request.html#MikeRequest"><span class="Identifier">MikeRequest</span></a><span class="Other">;</span> <span class="Identifier">prefix</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

An example middleware Echos the request path with optional prefix
&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L111"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L111" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="17">
<h1><a class="toc-backref" href="#17">Macros</a></h1>
<dl class="item">
<a id="beforeRequest.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#beforeRequest.m%2Cuntyped"><span class="Identifier">beforeRequest</span></a><span class="Other">(</span><span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Put all the code that you want to be called before a request like so.<pre class="listing"><span class="Identifier">beforeRequest</span><span class="Punctuation">:</span>
    <span class="Identifier">echo</span><span class="Punctuation">(</span><span class="StringLit">&quot;hello&quot;</span><span class="Punctuation">)</span> <span class="Comment"># this will be called before ever request</span>

<span class="Comment"># Can also be done for certain routes</span>
<span class="Identifier">beforeRequest</span><span class="Punctuation">:</span>
    <span class="Identifier">echo</span><span class="Punctuation">(</span><span class="StringLit">&quot;certain route&quot;</span><span class="Punctuation">)</span>
    <span class="Identifier">get</span> <span class="StringLit">&quot;/&quot;</span><span class="Punctuation">:</span>
        <span class="Identifier">send</span><span class="Punctuation">(</span><span class="StringLit">&quot;hello&quot;</span><span class="Punctuation">)</span></pre><p>Any calls put in here must have MikeRequest as their first parameter (this is likely to change in the future). Also checkout afterRequest if you want to run code after the request.</p>

&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L61"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L61" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="afterRequest.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#afterRequest.m%2Cuntyped"><span class="Identifier">afterRequest</span></a><span class="Other">(</span><span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L79"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L79" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="callBeforewares.m"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#callBeforewares.m"><span class="Identifier">callBeforewares</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Returns the code which calls all the before middlewares
&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L83"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L83" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="callAfterwares.m"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#callAfterwares.m"><span class="Identifier">callAfterwares</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Returns the code which calls all the after middlewares
&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L87"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L87" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<a id="insertBefore.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#insertBefore.m%2Cuntyped"><span class="Identifier">insertBefore</span></a><span class="Other">(</span><span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;Use beforeRequest instead&quot;</span></span><span class="Other">.}</span></span></pre></dt>
<dd>
  <div class="deprecation-message">
    <b>Deprecated:</b> Use beforeRequest instead
  </div>

Like beforeRequest and afterRequest but used for adding middleware to certain routes. Helpful for adding things like authentication middleware to only certain routes
&nbsp;&nbsp;<a
href="https://github.com/ire4ever1190/mike/tree/master/src/mike/middleware.nim#L91"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/ire4ever1190/mike/edit/devel/src/mike/middleware.nim#L91" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2020-09-13 06:35:53 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
